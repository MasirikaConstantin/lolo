import{u as D,r as M,j as e,H as V}from"./app-Bo2Vbsnc.js";import{B as v}from"./createLucideIcon-XQw2-DSi.js";import{I as t}from"./input-okKGAgmh.js";import{L as o}from"./label-Dk2z4hvO.js";import{S as m,a as u,b as x,c as h,d as l}from"./select-VnT2g1FZ.js";import{M as I}from"./example-date-picker-D5MQFrMm.js";import{t as d}from"./index-C2ywKrme.js";import{A as P,U as A}from"./app-layout-DdHLMRH3.js";/* empty css            */import"./index-BNGQMMhk.js";import"./index-vs_CEgml.js";import"./chevron-right-DL2bW7BS.js";import"./check-PfBPDYQe.js";import"./popover-YZJZ8lM_.js";import"./fr-BP0VUzFK.js";import"./chevron-left-CeZ96CWT.js";import"./app-logo-icon-CS4oG-CN.js";function X({citoyen:i,breadcrumbs:_,users:f,title:p}){const{data:n,setData:a,post:g,put:N,processing:C,errors:r,reset:F}=D({nom:i?.nom||"",postnom:i?.postnom||"",prenom:i?.prenom||"",sexe:i?.sexe||"M",date_naissance:i?.date_naissance||"",lieu_naissance:i?.lieu_naissance||"",etat_civil:i?.etat_civil||"Célibataire",profession:i?.profession||"",adresse:i?.adresse||"",nom_pere:i?.nom_pere||"",nom_mere:i?.nom_mere||"",numero_identification_national:i?.numero_identification_national||"",photo:null,user_id:null}),[j,E]=M.useState(i?.photo||null),S=s=>{s.preventDefault();const b=new FormData;Object.entries(n).forEach(([w,c])=>{c!=null&&b.append(w,c)}),i?N(`/citoyens/${i.ref}`,{onSuccess:()=>d.success("Citoyen mis à jour avec succès."),onError:()=>d.error("Une erreur est survenue lors de la mise à jour."),preserveScroll:!0}):g("/citoyens",{onSuccess:()=>{d.success("Citoyen créé avec succès."),F()},onError:()=>d.error("Une erreur est survenue lors de la création.")})};return e.jsxs(P,{breadcrumbs:_,children:[e.jsx(V,{title:p}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:p}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"user_id",children:"Associer à un utilisateur existant"}),e.jsxs(m,{value:n.user_id?n.user_id.toString():"",onValueChange:s=>a("user_id",s?parseInt(s):null),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner un utilisateur"})}),e.jsxs(h,{children:[e.jsx(l,{value:"",children:"Aucun utilisateur"}),f.map(s=>e.jsx(l,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.name," (",s.email,")"]})]})},s.id))]})]}),r.user_id&&e.jsx("p",{className:"text-sm text-destructive",children:r.user_id})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nom",children:"Nom"}),e.jsx(t,{id:"nom",value:n.nom,onChange:s=>a("nom",s.target.value),error:r.nom})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"postnom",children:"Postnom"}),e.jsx(t,{id:"postnom",value:n.postnom,onChange:s=>a("postnom",s.target.value),error:r.postnom})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"prenom",children:"Prénom"}),e.jsx(t,{id:"prenom",value:n.prenom,onChange:s=>a("prenom",s.target.value),error:r.prenom})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sexe",children:"Sexe"}),e.jsxs(m,{value:n.sexe,onValueChange:s=>a("sexe",s),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner le sexe"})}),e.jsxs(h,{children:[e.jsx(l,{value:"M",children:"Masculin"}),e.jsx(l,{value:"F",children:"Féminin"})]})]}),r.sexe&&e.jsx("p",{className:"text-sm text-red-500",children:r.sexe})]}),e.jsxs("div",{children:[e.jsx(I,{label:"Date de naissance",value:n.date_naissance,onChange:s=>a("date_naissance",s||"")}),r.date_naissance&&e.jsx("p",{className:"text-sm text-red-500",children:r.date_naissance})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"lieu_naissance",children:"Lieu de naissance"}),e.jsx(t,{id:"lieu_naissance",value:n.lieu_naissance,onChange:s=>a("lieu_naissance",s.target.value),error:r.lieu_naissance})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"etat_civil",children:"État civil"}),e.jsxs(m,{value:n.etat_civil,onValueChange:s=>a("etat_civil",s),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner l'état civil"})}),e.jsxs(h,{children:[e.jsx(l,{value:"Célibataire",children:"Célibataire"}),e.jsx(l,{value:"Marié(e)",children:"Marié(e)"}),e.jsx(l,{value:"Divorcé(e)",children:"Divorcé(e)"}),e.jsx(l,{value:"Veuf/Veuve",children:"Veuf/Veuve"})]})]}),r.etat_civil&&e.jsx("p",{className:"text-sm text-red-500",children:r.etat_civil})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"profession",children:"Profession"}),e.jsx(t,{id:"profession",value:n.profession,onChange:s=>a("profession",s.target.value),error:r.profession})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"adresse",children:"Adresse"}),e.jsx(t,{id:"adresse",value:n.adresse,onChange:s=>a("adresse",s.target.value),error:r.adresse})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"numero_identification_national",children:"Numéro d'identification national (NIN)"}),e.jsx(t,{id:"numero_identification_national",value:n.numero_identification_national||"",onChange:s=>a("numero_identification_national",s.target.value),error:r.numero_identification_national})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nom_pere",children:"Nom du père"}),e.jsx(t,{id:"nom_pere",value:n.nom_pere,onChange:s=>a("nom_pere",s.target.value),error:r.nom_pere})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nom_mere",children:"Nom de la mère"}),e.jsx(t,{id:"nom_mere",value:n.nom_mere,onChange:s=>a("nom_mere",s.target.value),error:r.nom_mere})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"photo",children:"Photo"}),e.jsx(t,{id:"photo",type:"file",accept:"image/*",onChange:s=>a("photo",s.target.files?.[0]||null)}),r.photo&&e.jsx("p",{className:"text-sm text-red-500",children:r.photo})]}),j&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:j,alt:"Preview",className:"h-32 w-32 object-cover rounded-md border"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Annuler"}),e.jsx(v,{type:"submit",disabled:C,children:i?"Mettre à jour":"Créer"})]})]})]})]})}export{X as default};
