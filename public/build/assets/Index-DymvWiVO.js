import{j as e,H as A,L as c,a as o}from"./app-Bo2Vbsnc.js";import{A as y}from"./app-layout-DdHLMRH3.js";import{B as i}from"./createLucideIcon-XQw2-DSi.js";import{I as S}from"./input-okKGAgmh.js";import{P as D,S as C,T as _,a as w,b as u,c as a,d as P,e as l,E as $,A as L,f as B,g as H,h as V,i as z,j as E,k as I,l as k,m as F,n as R,o as G}from"./alert-dialog-TgMpf1VQ.js";import{B as M}from"./badge-36Cf-ktw.js";import{t as h}from"./index-C2ywKrme.js";import{S as x,a as j,b as p,c as v,d as n}from"./select-VnT2g1FZ.js";import{P as O}from"./printer-DOPEwKqe.js";import{P as U}from"./pencil-BHJjtLn-.js";import{f as q,a as J}from"./fr-BP0VUzFK.js";/* empty css            */import"./index-vs_CEgml.js";import"./chevron-right-DL2bW7BS.js";import"./index-BNGQMMhk.js";import"./app-logo-icon-CS4oG-CN.js";import"./chevron-left-CeZ96CWT.js";import"./check-PfBPDYQe.js";const K=[{title:"Tableau de bord",href:"/dashboard"},{title:"Documents de mariage",href:"/documents-mariage"}];function he({documents:d,filters:r,typesDocuments:m}){const g=s=>{const t=s.target.value;o.get("/documents-mariage",{search:t,type_document:r.type_document,livre:r.livre},{preserveState:!0,replace:!0})},f=s=>{o.get("/documents-mariage",{search:r.search,type_document:s,livre:r.livre},{preserveState:!0,replace:!0})},N=s=>{const t=s==="all"?null:s==="true";o.get("/documents-mariage",{search:r.search,type_document:r.type_document,livre:t},{preserveState:!0,replace:!0})},b=s=>{o.delete(`/documents-mariage/${s.id}`,{preserveState:!0,replace:!0,onSuccess:()=>{h.success("Document supprimé avec succès.")},onError:()=>{h.error("Une erreur est survenue lors de la suppression du document.")}})},T=s=>s.mariage?`${s.mariage.homme?.nom} ${s.mariage.homme?.prenom} & ${s.mariage.femme?.nom} ${s.mariage.femme?.prenom}`:"N/A";return e.jsxs(y,{breadcrumbs:K,children:[e.jsx(A,{title:"Gestion des documents de mariage"}),e.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des documents de mariage"}),e.jsx(c,{href:"/documents-mariage/create",children:e.jsxs(i,{children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Ajouter un document"]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(C,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(S,{placeholder:"Rechercher par numéro ou noms...",className:"pl-9",defaultValue:r.search,onChange:g})]}),e.jsx("div",{className:"w-48",children:e.jsxs(x,{value:r.type_document||"",onValueChange:f,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Tous les types"})}),e.jsxs(v,{children:[e.jsx(n,{value:void 0,children:"Tous les types"}),Object.entries(m).map(([s,t])=>e.jsx(n,{value:s,children:t},s))]})]})}),e.jsx("div",{className:"w-48",children:e.jsxs(x,{value:r.livre===void 0?"all":r.livre?"true":"false",onValueChange:N,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Tous les statuts"})}),e.jsxs(v,{children:[e.jsx(n,{value:"all",children:"Tous les statuts"}),e.jsx(n,{value:"true",children:"Livrés"}),e.jsx(n,{value:"false",children:"Non livrés"})]})]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(_,{children:[e.jsx(w,{children:e.jsxs(u,{children:[e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Numéro"}),e.jsx(a,{children:"Couple"}),e.jsx(a,{children:"Date émission"}),e.jsx(a,{children:"Statut"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(P,{children:d.data.map(s=>e.jsxs(u,{children:[e.jsx(l,{className:"font-medium",children:m[s.type_document]||s.type_document}),e.jsx(l,{children:s.numero_document}),e.jsx(l,{children:T(s)}),e.jsx(l,{children:q(new Date(s.date_emission),"PP",{locale:J})}),e.jsx(l,{children:e.jsx(M,{variant:s.livre?"default":"secondary",children:s.livre?"Livré":"Non livré"})}),e.jsxs(l,{className:"flex justify-end gap-2",children:[e.jsx(c,{href:`/documents-mariage/${s.id}/print/certificat`,target:"_blank",children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsx(c,{href:`/documents-mariage/${s.ref}`,children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsx(c,{href:`/documents-mariage/${s.id}/edit`,children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs(L,{children:[e.jsx(B,{asChild:!0,children:e.jsx(i,{variant:"destructive",size:"sm",children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(V,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Êtes-vous sûr de vouloir supprimer ce document?"}),e.jsx(I,{children:"Cette action ne peut pas être annulée. Cela supprimera définitivement le document de nos serveurs."})]}),e.jsxs(k,{children:[e.jsx(F,{children:"Annuler"}),e.jsx(R,{onClick:()=>b(s),children:"Supprimer"})]})]})]})]})]},s.id))})]})}),e.jsx(G,{data:d})]})]})}export{he as default};
