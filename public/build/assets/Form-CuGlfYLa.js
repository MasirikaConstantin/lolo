import{u as z,r as T,j as e,H as B}from"./app-Bo2Vbsnc.js";import{B as l}from"./createLucideIcon-XQw2-DSi.js";import{I as c}from"./input-okKGAgmh.js";import{L as n}from"./label-Dk2z4hvO.js";import{S as h,a as u,b as x,c as p,d as j}from"./select-VnT2g1FZ.js";import{t as _}from"./index-C2ywKrme.js";import{A as R}from"./app-layout-DdHLMRH3.js";import{P as U,a as q,b as G,C as J}from"./popover-YZJZ8lM_.js";import{C as K}from"./calendar-D3tbVsXp.js";import{f as N,a as y}from"./fr-BP0VUzFK.js";/* empty css            */import"./index-BNGQMMhk.js";import"./index-vs_CEgml.js";import"./chevron-right-DL2bW7BS.js";import"./check-PfBPDYQe.js";import"./app-logo-icon-CS4oG-CN.js";import"./chevron-left-CeZ96CWT.js";function he({mariage:a,citoyens:g,fonctionnaires:P,regimes:b,statuts:S={},breadcrumbs:I,title:C}){const{data:r,setData:m,post:H,put:A,processing:D,errors:i,reset:O}=z({homme_id:a?.homme_id||"",femme_id:a?.femme_id||"",date_mariage:a?.date_mariage||"",heure_mariage:a?.heure_mariage||"10:00",officier_id:a?.officier_id||"",lieu_mariage:a?.lieu_mariage||"",regime_matrimonial:a?.regime_matrimonial||Object.keys(b)[0],temoins_homme:a?.temoins_homme||[],temoins_femme:a?.temoins_femme||[],statut:a?.statut||"en_attente",notes:a?.notes||""}),[f,F]=T.useState(""),[v,w]=T.useState(""),V=s=>{s.preventDefault(),a?A(`/mariages/${a.id}`,{onSuccess:()=>_.success("Mariage mis à jour avec succès."),onError:()=>_.error("Une erreur est survenue lors de la mise à jour."),preserveScroll:!0}):H("/mariages",{onSuccess:()=>{_.success("Mariage enregistré avec succès."),O()},onError:()=>_.error("Une erreur est survenue lors de l'enregistrement.")})},E=()=>{f.trim()&&(m("temoins_homme",[...r.temoins_homme||[],f]),F(""))},M=s=>{const t=[...r.temoins_homme||[]];t.splice(s,1),m("temoins_homme",t)},$=()=>{v.trim()&&(m("temoins_femme",[...r.temoins_femme||[],v]),w(""))},L=s=>{const t=[...r.temoins_femme||[]];t.splice(s,1),m("temoins_femme",t)},k=s=>`${s.nom} ${s.postnom} ${s.prenom}`,o=g.find(s=>s.id===Number(r.homme_id)),d=g.find(s=>s.id===Number(r.femme_id));return console.log(r),e.jsxs(R,{breadcrumbs:I,children:[e.jsx(B,{title:C}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:C}),e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"homme_id",children:"Époux"}),e.jsxs(h,{value:r.homme_id.toString(),onValueChange:s=>m("homme_id",parseInt(s)),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner l'époux"})}),e.jsx(p,{children:g.filter(s=>s.sexe==="M").map(s=>e.jsx(j,{value:s.id.toString(),children:k(s)},s.id))})]}),i.homme_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.homme_id}),o&&e.jsxs("div",{className:"mt-2 p-3 border rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium",children:"Informations de l'époux:"}),e.jsxs("p",{className:"text-sm",children:[N(new Date(o.date_naissance),"PP",{locale:y})," - ",o.lieu_naissance]}),e.jsxs("p",{className:"text-sm",children:["Fils de ",o.nom_pere," et ",o.nom_mere]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"femme_id",children:"Épouse"}),e.jsxs(h,{value:r.femme_id.toString(),onValueChange:s=>m("femme_id",parseInt(s)),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner l'épouse"})}),e.jsx(p,{children:g.filter(s=>s.sexe==="F").map(s=>e.jsx(j,{value:s.id.toString(),children:k(s)},s.id))})]}),i.femme_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.femme_id}),d&&e.jsxs("div",{className:"mt-2 p-3 border rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium",children:"Informations de l'épouse:"}),e.jsxs("p",{className:"text-sm",children:[N(new Date(d.date_naissance),"PP",{locale:y})," - ",d.lieu_naissance]}),e.jsxs("p",{className:"text-sm",children:["Fille de ",d.nom_pere," et ",d.nom_mere]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"date_mariage",children:"Date du mariage"}),e.jsxs(U,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(l,{variant:"outline","data-empty":!r.date_mariage,className:"data-[empty=true]:text-muted-foreground w-[280px] justify-start text-left font-normal",children:[e.jsx(K,{}),r.date_mariage?N(new Date(r.date_mariage),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(G,{className:"w-auto p-0",children:e.jsx(J,{mode:"single",selected:r.date_mariage?new Date(r.date_mariage):null,onSelect:s=>m("date_mariage",s?.toISOString().split("T")[0]||"")})})]}),i.date_mariage&&e.jsx("p",{className:"text-sm text-red-500",children:i.date_mariage})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"heure_mariage",children:"Heure du mariage"}),e.jsx(c,{type:"time",id:"time-picker",step:"1",value:r.heure_mariage,onChange:s=>m("heure_mariage",s.target.value),className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"}),i.heure_mariage&&e.jsx("p",{className:"text-sm text-red-500",children:i.heure_mariage})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"officier_id",children:"Officier d'état civil"}),e.jsxs(h,{value:r.officier_id.toString(),onValueChange:s=>m("officier_id",parseInt(s)),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner l'officier"})}),e.jsx(p,{children:P.map(s=>e.jsxs(j,{value:s.id.toString(),children:[s.nom," ",s.prenom," (",s.fonction,")"]},s.id))})]}),i.officier_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.officier_id})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"lieu_mariage",children:"Lieu du mariage"}),e.jsx(c,{id:"lieu_mariage",value:r.lieu_mariage,onChange:s=>m("lieu_mariage",s.target.value),error:i.lieu_mariage})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"regime_matrimonial",children:"Régime matrimonial"}),e.jsxs(h,{value:r.regime_matrimonial,onValueChange:s=>m("regime_matrimonial",s),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner le régime"})}),e.jsx(p,{children:Object.entries(b).map(([s,t])=>e.jsx(j,{value:s,children:t},s))})]}),i.regime_matrimonial&&e.jsx("p",{className:"text-sm text-red-500",children:i.regime_matrimonial})]}),Object.keys(S).length>0&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"statut",children:"Statut"}),e.jsxs(h,{value:r.statut,onValueChange:s=>m("statut",s),children:[e.jsx(u,{children:e.jsx(x,{placeholder:"Sélectionner le statut"})}),e.jsx(p,{children:Object.entries(S).map(([s,t])=>e.jsx(j,{value:s,children:t},s))})]}),i.statut&&e.jsx("p",{className:"text-sm text-red-500",children:i.statut})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Témoins de l'époux"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(c,{value:f,onChange:s=>F(s.target.value),placeholder:"Ajouter un témoin"}),e.jsx(l,{type:"button",onClick:E,children:"Ajouter"})]}),e.jsx("div",{className:"space-y-2",children:r.temoins_homme?.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("span",{children:s}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(t),children:"Supprimer"})]},t))})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Témoins de l'épouse"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(c,{value:v,onChange:s=>w(s.target.value),placeholder:"Ajouter un témoin"}),e.jsx(l,{type:"button",onClick:$,children:"Ajouter"})]}),e.jsx("div",{className:"space-y-2",children:r.temoins_femme?.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("span",{children:s}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(t),children:"Supprimer"})]},t))})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"notes",children:"Notes"}),e.jsx(c,{id:"notes",value:r.notes||"",onChange:s=>m("notes",s.target.value),error:i.notes})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Annuler"}),e.jsx(l,{type:"submit",disabled:D,children:a?"Mettre à jour":"Enregistrer"})]})]})]})]})}export{he as default};
