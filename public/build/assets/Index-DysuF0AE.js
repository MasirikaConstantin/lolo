import{j as e,H as b,L as n,a as c}from"./app-Bo2Vbsnc.js";import{A as N}from"./app-layout-DdHLMRH3.js";import{B as l}from"./createLucideIcon-XQw2-DSi.js";import{I as S}from"./input-okKGAgmh.js";import{P as A,S as C,T as D,a as T,b as m,c as r,d as w,e as a,E as $,A as P,f as _,g as B,h as y,i as E,j as H,k as I,l as L,m as R,n as V,o as z}from"./alert-dialog-TgMpf1VQ.js";import{B as u}from"./badge-36Cf-ktw.js";import{t as h}from"./index-C2ywKrme.js";import{S as F,a as M,b as k,c as G,d as x}from"./select-VnT2g1FZ.js";import{P as O}from"./pencil-BHJjtLn-.js";import{f as U,a as q}from"./fr-BP0VUzFK.js";/* empty css            */import"./index-vs_CEgml.js";import"./chevron-right-DL2bW7BS.js";import"./index-BNGQMMhk.js";import"./app-logo-icon-CS4oG-CN.js";import"./chevron-left-CeZ96CWT.js";import"./check-PfBPDYQe.js";const J=[{title:"Tableau de bord",href:"/dashboard"},{title:"Mariages",href:"/mariages"}];function me({mariages:o,filters:t,statuts:d}){const j=s=>{const i=s.target.value;c.get("/mariages",{search:i,statut:t.statut},{preserveState:!0,replace:!0})},p=s=>{c.get("/mariages",{search:t.search,statut:s},{preserveState:!0,replace:!0})},f=s=>{c.delete(`/mariages/${s.ref}`,{preserveState:!0,replace:!0,onSuccess:()=>{h.success("Mariage supprimé avec succès.")},onError:()=>{h.error("Une erreur est survenue lors de la suppression du mariage.")}})},g=s=>`${s.homme?.nom} ${s.homme?.postnom} ${s.homme?.prenom} & ${s.femme?.nom} ${s.femme?.postnom} ${s.femme?.prenom}`,v=s=>{switch(s){case"approuvé":return"default";case"célébré":return"success";case"rejeté":return"destructive";default:return"secondary"}};return e.jsxs(N,{breadcrumbs:J,children:[e.jsx(b,{title:"Gestion des mariages"}),e.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des mariages"}),e.jsx(n,{href:"/mariages/create",children:e.jsxs(l,{children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Enregistrer un mariage"]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(C,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(S,{placeholder:"Rechercher par nom des époux...",className:"pl-9",defaultValue:t.search,onChange:j})]}),e.jsx("div",{className:"w-48",children:e.jsxs(F,{value:t.statut||"",onValueChange:p,children:[e.jsx(M,{children:e.jsx(k,{placeholder:"Filtrer par statut"})}),e.jsxs(G,{children:[e.jsx(x,{value:null,children:"Tous les statuts"}),Object.entries(d).map(([s,i])=>e.jsx(x,{value:s,children:i},s))]})]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(D,{children:[e.jsx(T,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Couple"}),e.jsx(r,{children:"Date et heure"}),e.jsx(r,{children:"Lieu"}),e.jsx(r,{children:"Régime"}),e.jsx(r,{children:"Officier"}),e.jsx(r,{children:"Statut"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(w,{children:o.data.map(s=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:g(s)}),e.jsxs(a,{children:[U(new Date(s.date_mariage),"PP",{locale:q})," à ",s.heure_mariage]}),e.jsx(a,{children:s.lieu_mariage}),e.jsx(a,{children:e.jsx(u,{variant:"outline",children:s.regime_matrimonial.replace(/_/g," ")})}),e.jsxs(a,{children:[s.officier?.nom," ",s.officier?.prenom]}),e.jsx(a,{children:e.jsx(u,{variant:v(s.statut),children:d[s.statut]})}),e.jsxs(a,{className:"flex justify-end gap-2",children:[e.jsx(n,{href:`/mariages/${s.ref}`,children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsx(n,{href:`/mariages/${s.ref}/edit`,children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:"sm",children:e.jsx(B,{className:"h-4 w-4"})})}),e.jsxs(y,{children:[e.jsxs(E,{children:[e.jsx(H,{children:"Êtes-vous sûr de vouloir supprimer ce mariage?"}),e.jsx(I,{children:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'enregistrement du mariage de nos serveurs."})]}),e.jsxs(L,{children:[e.jsx(R,{children:"Annuler"}),e.jsx(V,{onClick:()=>f(s),children:"Supprimer"})]})]})]})]})]},s.id))})]})}),e.jsx(z,{data:o})]})]})}export{me as default};
