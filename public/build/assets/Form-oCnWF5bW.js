import{u as D,r as M,j as e,H as w}from"./app-Bo2Vbsnc.js";import{B as x}from"./createLucideIcon-XQw2-DSi.js";import{I as t}from"./input-okKGAgmh.js";import{L as o}from"./label-Dk2z4hvO.js";import{S as u,a as p,b as j,c as v,d as l}from"./select-VnT2g1FZ.js";import{M as P}from"./example-date-picker-D5MQFrMm.js";import{t as c}from"./index-C2ywKrme.js";import{A as V}from"./app-layout-DdHLMRH3.js";/* empty css            */import"./index-BNGQMMhk.js";import"./index-vs_CEgml.js";import"./chevron-right-DL2bW7BS.js";import"./check-PfBPDYQe.js";import"./popover-YZJZ8lM_.js";import"./fr-BP0VUzFK.js";import"./chevron-left-CeZ96CWT.js";import"./app-logo-icon-CS4oG-CN.js";function Q({citoyen:n,breadcrumbs:_,title:m}){const{data:a,setData:i,post:f,put:g,processing:C,errors:r,reset:N}=D({nom:n?.nom||"",postnom:n?.postnom||"",prenom:n?.prenom||"",sexe:n?.sexe||"M",date_naissance:n?.date_naissance||"",lieu_naissance:n?.lieu_naissance||"",etat_civil:n?.etat_civil||"Célibataire",profession:n?.profession||"",adresse:n?.adresse||"",nom_pere:n?.nom_pere||"",nom_mere:n?.nom_mere||"",numero_identification_national:n?.numero_identification_national||"",photo:null}),[h,I]=M.useState(n?.photo||null),b=s=>{s.preventDefault();const F=new FormData;Object.entries(a).forEach(([S,d])=>{d!=null&&F.append(S,d)}),n?g(`/citoyens/${n.ref}`,{onSuccess:()=>c.success("Citoyen mis à jour avec succès."),onError:()=>c.error("Une erreur est survenue lors de la mise à jour."),preserveScroll:!0}):f("/citoyens",{onSuccess:()=>{c.success("Citoyen créé avec succès."),N()},onError:()=>c.error("Une erreur est survenue lors de la création.")})};return e.jsxs(V,{breadcrumbs:_,children:[e.jsx(w,{title:m}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:m}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nom",children:"Nom"}),e.jsx(t,{id:"nom",value:a.nom,onChange:s=>i("nom",s.target.value),error:r.nom})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"postnom",children:"Postnom"}),e.jsx(t,{id:"postnom",value:a.postnom,onChange:s=>i("postnom",s.target.value),error:r.postnom})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"prenom",children:"Prénom"}),e.jsx(t,{id:"prenom",value:a.prenom,onChange:s=>i("prenom",s.target.value),error:r.prenom})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sexe",children:"Sexe"}),e.jsxs(u,{value:a.sexe,onValueChange:s=>i("sexe",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Sélectionner le sexe"})}),e.jsxs(v,{children:[e.jsx(l,{value:"M",children:"Masculin"}),e.jsx(l,{value:"F",children:"Féminin"})]})]}),r.sexe&&e.jsx("p",{className:"text-sm text-red-500",children:r.sexe})]}),e.jsxs("div",{children:[e.jsx(P,{label:"Date de naissance",value:a.date_naissance,onChange:s=>i("date_naissance",s||"")}),r.date_naissance&&e.jsx("p",{className:"text-sm text-red-500",children:r.date_naissance})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"lieu_naissance",children:"Lieu de naissance"}),e.jsx(t,{id:"lieu_naissance",value:a.lieu_naissance,onChange:s=>i("lieu_naissance",s.target.value),error:r.lieu_naissance})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"etat_civil",children:"État civil"}),e.jsxs(u,{value:a.etat_civil,onValueChange:s=>i("etat_civil",s),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Sélectionner l'état civil"})}),e.jsxs(v,{children:[e.jsx(l,{value:"Célibataire",children:"Célibataire"}),e.jsx(l,{value:"Marié(e)",children:"Marié(e)"}),e.jsx(l,{value:"Divorcé(e)",children:"Divorcé(e)"}),e.jsx(l,{value:"Veuf/Veuve",children:"Veuf/Veuve"})]})]}),r.etat_civil&&e.jsx("p",{className:"text-sm text-red-500",children:r.etat_civil})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"profession",children:"Profession"}),e.jsx(t,{id:"profession",value:a.profession,onChange:s=>i("profession",s.target.value),error:r.profession})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"adresse",children:"Adresse"}),e.jsx(t,{id:"adresse",value:a.adresse,onChange:s=>i("adresse",s.target.value),error:r.adresse})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"numero_identification_national",children:"Numéro d'identification national (NIN)"}),e.jsx(t,{id:"numero_identification_national",value:a.numero_identification_national||"",onChange:s=>i("numero_identification_national",s.target.value),error:r.numero_identification_national})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nom_pere",children:"Nom du père"}),e.jsx(t,{id:"nom_pere",value:a.nom_pere,onChange:s=>i("nom_pere",s.target.value),error:r.nom_pere})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nom_mere",children:"Nom de la mère"}),e.jsx(t,{id:"nom_mere",value:a.nom_mere,onChange:s=>i("nom_mere",s.target.value),error:r.nom_mere})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"photo",children:"Photo"}),e.jsx(t,{id:"photo",type:"file",accept:"image/*",onChange:s=>i("photo",s.target.files?.[0]||null)}),r.photo&&e.jsx("p",{className:"text-sm text-red-500",children:r.photo})]}),h&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:h,alt:"Preview",className:"h-32 w-32 object-cover rounded-md border"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Annuler"}),e.jsx(x,{type:"submit",disabled:C,children:n?"Mettre à jour":"Créer"})]})]})]})]})}export{Q as default};
