import{j as e,H as w,L as d,a as i}from"./app-Bo2Vbsnc.js";import{A as y}from"./app-layout-DdHLMRH3.js";import{B as n}from"./createLucideIcon-XQw2-DSi.js";import{I as $}from"./input-okKGAgmh.js";import{P as _,S as B,T as E,a as H,b as h,c as r,d as M,e as t,E as P,A as V,f as I,g as R,h as z,i as F,j as L,k as G,l as k,m as U,n as q,o as J}from"./alert-dialog-TgMpf1VQ.js";import{B as K}from"./badge-36Cf-ktw.js";import{t as x}from"./index-C2ywKrme.js";import{S as p,a as j,b as g,c as f,d as c}from"./select-VnT2g1FZ.js";import{P as O}from"./pencil-BHJjtLn-.js";import{f as v,a as b}from"./fr-BP0VUzFK.js";/* empty css            */import"./index-vs_CEgml.js";import"./chevron-right-DL2bW7BS.js";import"./index-BNGQMMhk.js";import"./app-logo-icon-CS4oG-CN.js";import"./chevron-left-CeZ96CWT.js";import"./check-PfBPDYQe.js";const Q=[{title:"Tableau de bord",href:"/dashboard"},{title:"Étapes de mariage",href:"/etapes-mariage"}];function he({etapes:o,filters:a,etapesOptions:m,statutsOptions:u}){const N=s=>{const l=s.target.value;i.get("/etapes-mariage",{search:l,etape:a.etape,statut:a.statut},{preserveState:!0,replace:!0})},A=s=>{i.get("/etapes-mariage",{search:a.search,etape:s,statut:a.statut},{preserveState:!0,replace:!0})},S=s=>{i.get("/etapes-mariage",{search:a.search,etape:a.etape,statut:s},{preserveState:!0,replace:!0})},T=s=>{i.delete(`/etapes-mariage/${s.id}`,{preserveState:!0,replace:!0,onSuccess:()=>{x.success("Étape supprimée avec succès.")},onError:()=>{x.error("Une erreur est survenue lors de la suppression de l'étape.")}})},C=s=>s.mariage?`${s.mariage.homme?.nom} ${s.mariage.homme?.prenom} & ${s.mariage.femme?.nom} ${s.mariage.femme?.prenom}`:"N/A",D=s=>{switch(s){case"complet":return"success";case"en_cours":return"default";case"rejete":return"destructive";default:return"secondary"}};return e.jsxs(y,{breadcrumbs:Q,children:[e.jsx(w,{title:"Gestion des étapes de mariage"}),e.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des étapes de mariage"}),e.jsx(d,{href:"/etapes-mariage/create",children:e.jsxs(n,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Ajouter une étape"]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Rechercher par noms des époux...",className:"pl-9",defaultValue:a.search,onChange:N})]}),e.jsx("div",{className:"w-48",children:e.jsxs(p,{value:a.etape||"",onValueChange:A,children:[e.jsx(j,{children:e.jsx(g,{placeholder:"Toutes les étapes"})}),e.jsxs(f,{children:[e.jsx(c,{value:void 0,children:"Toutes les étapes"}),Object.entries(m).map(([s,l])=>e.jsx(c,{value:s,children:l},s))]})]})}),e.jsx("div",{className:"w-48",children:e.jsxs(p,{value:a.statut||"",onValueChange:S,children:[e.jsx(j,{children:e.jsx(g,{placeholder:"Tous les statuts"})}),e.jsxs(f,{children:[e.jsx(c,{value:void 0,children:"Tous les statuts"}),Object.entries(u).map(([s,l])=>e.jsx(c,{value:s,children:l},s))]})]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(E,{children:[e.jsx(H,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Étape"}),e.jsx(r,{children:"Couple"}),e.jsx(r,{children:"Statut"}),e.jsx(r,{children:"Dates"}),e.jsx(r,{children:"Responsable"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(M,{children:o.data.map(s=>e.jsxs(h,{children:[e.jsx(t,{className:"font-medium",children:m[s.etape]||s.etape}),e.jsx(t,{children:C(s)}),e.jsx(t,{children:e.jsx(K,{variant:D(s.statut),children:u[s.statut]})}),e.jsxs(t,{children:[s.date_debut?v(new Date(s.date_debut),"dd/MM/yyyy",{locale:b}):"-",s.date_fin&&` → ${v(new Date(s.date_fin),"dd/MM/yyyy",{locale:b})}`]}),e.jsx(t,{children:s.responsable?`${s.responsable.nom} ${s.responsable.prenom}`:"Non assigné"}),e.jsxs(t,{className:"flex justify-end gap-2",children:[e.jsx(d,{href:`/etapes-mariage/${s.ref}`,children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsx(d,{href:`/etapes-mariage/${s.id}/edit`,children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs(V,{children:[e.jsx(I,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsxs(z,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Êtes-vous sûr de vouloir supprimer cette étape?"}),e.jsx(G,{children:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'enregistrement de cette étape."})]}),e.jsxs(k,{children:[e.jsx(U,{children:"Annuler"}),e.jsx(q,{onClick:()=>T(s),children:"Supprimer"})]})]})]})]})]},s.id))})]})}),e.jsx(J,{data:o})]})]})}export{he as default};
